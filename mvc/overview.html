<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Document</title>
   <link rel="stylesheet" href="../css/bootstrap.min.css">
   <link rel="stylesheet" href="../css/prism.css">
   <link rel="stylesheet" href="../css/style.css">
</head>
<body>
   <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom shadow-sm">
         <div class="container">
            <a class="navbar-brand" href="../index.html">DevNet</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
               <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
               <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                     <a class="nav-link" aria-current="page" href="../index.html">Home</a>
                  </li>
                  <li class="nav-item">
                     <a class="nav-link active" aria-current="page" href="../index.html">Documentation</a>
                  </li>
               </ul>
               <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                  <li class="nav-item dropdown">
                     <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Versions
                     </a>
                     <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#">Version 0.1</a></li>
                     </ul>
                  </li>
               </ul>
            </div>
         </div>
      </nav>
   </header>
   <main role="main" class="pb-3 bg-white">
      <br>
      <div class="container">
         <div class="row">
            <aside style="width: 260px;">
               <nav id="accordion">
                  <a href="" class="menu collapsed" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne"><span class="arrow"></span>Get Started</a>
                  <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-bs-parent="#accordion">
                     <ul class="sub-menu">
                        <li><a class="nav-link text-dark" href="../start/overview.html">Overview</a></li>
                        <li><a class="nav-link text-dark" href="../start/console.html">Console application</a></li>
                        <li><a class="nav-link text-dark" href="../start/web.html">Web application</a></li>
                        <li><a class="nav-link text-dark" href="#">Configuration</a></li>
                     </ul>
                  </div>
                  <a href="#" class="menu collapsed" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo"><span class="arrow"></span>Fundamentals</a>
                  <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-bs-parent="#accordion">
                     <ul class="sub-menu">
                        <li><a class="nav-link text-dark" href="../fundamentals/middleware.html">Middleware</a></li>
                        <li><a class="nav-link text-dark" href="../fundamentals/routing.html">Routing</a></li>
                        <li><a class="nav-link text-dark" href="../fundamentals/dependency.html">Dependency injection</a></li>
                        <li><a class="nav-link text-dark" href="#">Http message</a></li>
                        <li><a class="nav-link text-dark" href="#">Error Handling</a></li>
                        <li><a class="nav-link text-dark" href="#">Security</a></li>
                     </ul>
                  </div>
                  <a href="#" class="menu" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree"><span class="arrow"></span>MVC</a>
                  <div id="collapseThree" class="collapse show" aria-labelledby="headingThree" data-bs-parent="#accordion">
                     <ul class="sub-menu">
                        <li><a class="nav-link text-dark fw-bold" href="overview.html">Overview</a></li>
                        <li><a class="nav-link text-dark" href="controller.html">Controller</a></li>
                        <li><a class="nav-link text-dark" href="view.html">View</a></li>
                        <li><a class="nav-link text-dark" href="layout.html">Layout</a></li>
                        <li><a class="nav-link text-dark" href="filters.html">Filters</a></li>
                     </ul>
                  </div>
                  <a href="#" class="menu collapsed" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour"><span class="arrow"></span>Entity ORM</a>
                  <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-bs-parent="#accordion">
                     <ul class="sub-menu">
                        <li><a class="nav-link text-dark" href="../entity/overview.html">Overview</a></li>
                        <li><a class="nav-link text-dark" href="../entity/model.html">Model</a></li>
                        <li><a class="nav-link text-dark" href="../entity/querying.html">Querying Data</a></li>
                        <li><a class="nav-link text-dark" href="../entity/saving.html#4">Saving Data</a></li>
                        <li><a class="nav-link text-dark" href="../entity/relationships.html">Relationships</a></li>
                     </ul>
                  </div>
                  <a href="#" class="menu collapsed" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive"><span class="arrow"></span>Identity Manager</a>
                  <div id="collapseFive" class="collapse" aria-labelledby="headingFive" data-bs-parent="#accordion">
                     <ul class="sub-menu">
                        <li><a class="nav-link text-dark" href="../identity/overview.html">Overview</a></li>
                        <li><a class="nav-link text-dark" href="../identity/data.html">User Data</a></li>
                        <li><a class="nav-link text-dark" href="../identity/authentication.html">User Authentication</a></li>
                        <li><a class="nav-link text-dark" href="../identity/roles.html">User Roles</a></li>
                     </ul>
                  </div>
                  <a href="#" class="menu collapsed" data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix"><span class="arrow"></span>Core</a>
                  <div id="collapseSix" class="collapse" aria-labelledby="headingSix" data-bs-parent="#accordion">
                     <ul class="sub-menu">
                        <li><a class="nav-link text-dark" href="#">Typed Collection</a></li>
                        <li><a class="nav-link text-dark" href="#">Generics</a></li>
                        <li><a class="nav-link text-dark" href="#">Extension Method</a></li>
                        <li><a class="nav-link text-dark" href="#">Linq data query</a></li>
                        <li><a class="nav-link text-dark" href="#">Database Access Object</a></li>
                        <li><a class="nav-link text-dark" href="#">Event Delegat</a></li>
                        <li><a class="nav-link text-dark" href="#">Tasks</a></li>
                        <li><a class="nav-link text-dark" href="#">CLI</a></li>
                     </ul>
                  </div>
               </nav>
            </aside>
            <article class="flex-grow-1" style="width: 400px;">
               <h1>Overview</h1>
               <hr>
               <p>
                  The MVC (Model View Controller) is an architectural pattern helps to achieve separation of concerns, it make appliaction more testable and easier to update than traditional monolithic apps, it separates the application into three main components: Model, View, and Controller.
               </p>
               <p>
                  <b>Model:</b> is a classe that represent the data of the app. The model classes use validation logic to enforce business rules for that data. Typically, model objects retrieve and store model state in a database.
               </p>
               <p>
                  <b>View:</b> is the component that displays the appliaction's user interface (UI). Generally, this UI displays the model data.
               </p>
               <p>
                  <b>Controller:</b> is a class used to define and group a set of methods called actions, that handles incoming requests which are mapped to actions through routing, and retrieve model data and call view template that return a response.
               </p>
               <img src="../images/mvc.svg" alt="Web app home page" width="80%" height="auto">
               <br><br>
               <p>
                  User requests are routed to a Controller which is responsible for working with the Model to perform user actions and/or retrieve results of queries. The Controller chooses the View to display to the user, and provides it with any Model data it requires.
               </p>
               <h3>MVC Registraction</h3>
               <p>
                  Befor using MVC components, make sure the service MVC is registered inside the <code>configureServices</code> method of <code>Startup</code> class, by calling the extension method <code>addMvc()</code> of the instance of the type <code>IServiceCollection</code>.
               </p>
               <pre><code class="language-php">
                  &lt;?php
                  
                  namespace Application;
                  
                  use Artister\DevNet\Dependency\IServiceCollection;
                  use Artister\DevNet\Dispatcher\IApplicationBuilder;
                  use Artister\DevNet\Extensions\DependencyExtensions;
                  use Artister\DevNet\Extensions\HostingExtensions;
                  
                  class Startup
                  {
                     public function configureServices(IServiceCollection $services)
                     {
                        $services->addMvc();
                     }
                      ...
                  }
               </code></pre>
               <h3>Conventional Routing</h3>
               <p>
                  Conventional Routing is the default routing of MVC application, onley one generic route template : <code>{controller=Home}/{action=Index}/{id?}</code> which can handle all url requests, by parsing it into 3 segments:<br>
                  <ol>
                     <li><b>Controller name:</b> default name is "home"</li>
                     <li><b>Action name:</b> default name is "index"</li>
                     <li><b>Id parameter:</b> is optionnal</li>
                  </ol>
               </p>
               <p>
                  In order to use the Conventional Routing, you have to make sure that the Middlewars <code>RouterMiddlewar</code> and <code>EndpointMiddlewar</code> are added to the pipeline in the method <code>configure(IApplicationBuilder $app)</code> of the <code>Startup</code> class, with the help of the Extension methods <code>addRouter()</code> and <code>addEndpoint(RouteCollection $routes)</code>.
               </p>
               <pre><code class="language-php">
                  class Startup
                  {
                     ...                     
                     public function configure(IApplicationBuilder $app)
                     {
                        $app->useRouter();

                        // Middlewars here
                        
                        $app->useEndpoint(function($routes) {
                              $routes->mapRoute("default", "{controller=Home}/{action=Index}/{id?}");
                        });
                     }
                  }
               </code></pre>
               <p>
                  <b>Note:</b> if you add a Literal route with Conventional route make sure to put the conventional route at the buttom of the routes list, because it has a greedy pattern and will catch all the urls.
               </p>
            </article>
         </div>
      </div>
   </main>
   <footer class="border-top footer text-muted bg-white">
      <div class="container">
         © 2020 - DevNet by Mohammed Moussaoui.
      </div>
   </footer>
   <script src="../js/bootstrap.bundle.min.js"></script>
   <script src="../js/prism.js"></script>
</body>
</html>